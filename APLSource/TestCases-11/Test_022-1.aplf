 R←Test_022(stopFlag batchFlag);name;⎕TRAP
⍝ Exercise "These" with a ref to a class and a non-existing file; uses CompreIt!
 ⎕TRAP←(999 'C' '. ⍝ Deliberate error')(0 'N')
 R←∆Failed

 :If 1≢batchFlag
     ##.CompareSimple.compareTool←'CompareIt!'
     ##.CompareSimple.pathToCompareIt←∆FindCompareIt
     name←#.FilesAndDirs
     :Trap 0
         ##.CompareSimple.These name'file://C:/Doesnotexistatall/myfile.dyalog'
         →FailsIf 1
     :Else
         →FailsIf'File not found: C:/Doesnotexistatall/myfile.dyalog'≢1⊃⎕DM
     :EndTrap

     R←∆OK
 :Else
     R←∆NoBatchTest
 :EndIf
