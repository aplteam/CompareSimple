 R←Test_acre_020(stopFlag batchFlag);filename;⎕TRAP;parms;path
⍝ Exercise "These" with class name and an acre component file. No user needed, just reporting.
 ⎕TRAP←(999 'C' '. ⍝ Deliberate error')(0 'N')
 R←∆Failed

 :If ∆AcreFlag
     'CompareTemporaryTestCases'#.⎕NS''
     path←∆RemoveTempProject
     {}⎕SE.UCMD'acre.createproject ',path,' #.CompareTemporaryTestCases'
     #.CompareTemporaryTestCases.⎕FIX':Class Foo' '∇r←Hello' 'r←''world''' '∇' ':EndClass'
     {}⎕SE.UCMD'acre.setchanged #.CompareTemporaryTestCases.Foo'
     {}⎕SE.UCMD'acre.setchanged #.CompareTemporaryTestCases.Foo'
     #.CompareTemporaryTestCases.⎕FIX':Class Foo' '∇r←Hello' 'r←''World''' '∇' ':EndClass'
     {}⎕SE.UCMD'acre.setchanged #.CompareTemporaryTestCases.Foo'
     {}⎕SE.UCMD'acre.setchanged #.CompareTemporaryTestCases.Foo'
     #.CompareTemporaryTestCases.⎕FIX':Class Foo' '∇r←Hello' 'r←''Universe''' '∇' ':EndClass'
     {}⎕SE.UCMD'acre.setchanged #.CompareTemporaryTestCases.Foo'
     {}⎕SE.UCMD'acre.setchanged #.CompareTemporaryTestCases.Foo'

     parms←##.CompareSimple.CreateParmsFor_These
     parms.componentNo←¯2
     parms.reportFile←#.FilesAndDirs.GetTempFilename''
     filename←'file://',∆Simplify'changefile'⎕SE.acre._code.run'#.CompareTemporaryTestCases.Foo'
     ##.CompareSimple.compareTool←'CompareIt!'
     parms ##.CompareSimple.These'#.CompareTemporaryTestCases.Foo'filename
     →PassesIf'-r+r'≡⊃¯1↑#.APLTreeUtils.ReadUtf8File parms.reportFile

∆TidyUp:
     #.⎕EX'CompareTemporaryTestCases'
     ∆RemoveTempProject
     R←∆OK
 :Else
     R←∆Inactive
 :EndIf
