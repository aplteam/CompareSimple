 R←Test_acre_021(stopFlag batchFlag);filename;⎕TRAP;parms;path
⍝ Exercise "These" with class name and an acre component file. Needs the user.
 ⎕TRAP←(999 'C' '. ⍝ Deliberate error')(0 'N')
 R←∆Failed

 :If 1≢batchFlag
     R←∆NoBatchTest
 :AndIf ∆AcreFlag
     'CompareTemporaryTestCases'#.⎕NS''
     path←∆RemoveTempProject
     {}⎕SE.UCMD'acre.createproject ',path,' #.CompareTemporaryTestCases'
     #.CompareTemporaryTestCases.⎕FIX':Class Foo' '∇r←Hello' 'r←''world''' '∇' ':EndClass'
     {}⎕SE.UCMD'acre.setchanged #.CompareTemporaryTestCases.Foo'
     #.CompareTemporaryTestCases.⎕FIX':Class Foo' '∇r←Hello' 'r←''World''' '∇' ':EndClass'
     {}⎕SE.UCMD'acre.setchanged #.CompareTemporaryTestCases.Foo'
     #.CompareTemporaryTestCases.⎕FIX':Class Foo' '∇r←Hello' 'r←''Universe''' '∇' ':EndClass'
     {}⎕SE.UCMD'acre.setchanged #.CompareTemporaryTestCases.Foo'

     parms←##.CompareSimple.CreateParmsFor_These
     parms.componentNo←2
     filename←'file://',∆Simplify'changefile'⎕SE.acre._code.run'#.CompareTemporaryTestCases.Foo'
     parms ##.CompareSimple.These'#.CompareTemporaryTestCases.Foo'filename

∆TidyUp:
     #.⎕EX'CompareTemporaryTestCases'
     ∆RemoveTempProject
     R←∆OK
 :Else
     R←∆Inactive
 :EndIf
